<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" type="image/ico" href="https://zxz.ee/favicon.ico">
    <title>个人主页</title>
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- 引入Bootstrap icon图标库 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
    <!-- CSS文件 -->
    <link rel="stylesheet" type="text/css" href="css/mate.css">
    <!--	<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/xiaoyanu/file-test@2021.11.26/more/homepage.js"></script>-->
</head>
<body>
<div id="main-box">
    <!--    <div id="head">-->
    <!--        <img id="touxiang" src="https://zxz.ee/touxiang.png">-->
    <!--        <p id="nick">ValentineHP</p>-->
    <!--        &lt;!&ndash; 调用一言文字API ，如不使用请将此段注释掉，并将下段的注释取消掉 &ndash;&gt;-->
    <!--        <p id="info"><span id="hitokoto_text">ヾ(•ω•`)o加载中……</span></p>-->
    <!--        &lt;!&ndash; 显示自定义一段文字 &ndash;&gt;-->
    <!--        &lt;!&ndash; <p id="info">凡是美好 都留有遗憾</p> &ndash;&gt;-->
    <!--    </div>-->
    <!--    <div id="main-1">-->
    <!--        &lt;!&ndash; <p class="title">[ 开源作品 ]</p> &ndash;&gt;-->
    <!--        &lt;!&ndash; 如果你要更换卡片背景图的话-->
    <!--                背景图大小为：180×70 （高斯模糊效果需要自己添加）&ndash;&gt;-->
    <!--        &lt;!&ndash; <p class="kapian" style="background: url(img/demo.jpg) center;">-->
    <!--            <a href="https://gitee.com/whpUp/fpga-video-capture" target="_blank" style="color: #000;">-->
    <!--                <span class="kapian-title"><i class="bi bi-github"></i> FPGA视频采集</span>-->
    <!--            </a>-->
    <!--        </p>-->
    <!--        <p class="kapian" style="background: url(img/demo.jpg) center;">-->
    <!--            <a href="https://github.com/wu-huipeng/Deep-Learning" target="_blank" style="color: #000;">-->
    <!--                <span class="kapian-title"><i class="bi bi-github"></i> 深度学习小项目</span>-->
    <!--            </a>-->
    <!--        </p>-->
    <!--        <p class="kapian" style="background: url(img/demo.jpg) center;">-->
    <!--            <a href="https://gitee.com/whpUp/esp32-four-axis-flight-control" target="_blank" style="color: #000;">-->
    <!--                <span class="kapian-title"><i class="bi bi-github"></i> ESP32四轴飞控</span>-->
    <!--            </a>-->
    <!--        </p>-->
    <!--        <p class="kapian" style="background: url(img/fwq.jpg) center;">-->
    <!--            <a href="https://gitee.com/whpUp/esp32-remote-control-hp" target="_blank" style="color: #000;">-->
    <!--                <span class="kapian-title"><i class="bi bi-github"></i> ESP32无线遥控器</span>-->
    <!--            </a>-->
    <!--        </p> &ndash;&gt;-->
    <!--    </div>-->
    <!--    <div id="main-2">-->
    <!--        <p class="main-2-text">-->
    <!--            <i class="bi bi-gender-male" style="color: blue;"></i>-->
    <!--            性别：男</p>-->
    <!--        <p class="main-2-text">-->
    <!--            <i class="bi bi-activity" style="color: #ff3d00;"></i>-->
    <!--            年龄：23</p>-->
    <!--        <p class="main-2-text">-->
    <!--            <i class="bi bi-geo-alt-fill" style="color: #304ffe;"></i>-->
    <!--            出生于：河南</p>-->
    <!--        <p class="main-2-text">-->
    <!--            <i class="bi bi-app-indicator" style="color: #dd2c00;"></i>-->
    <!--            状态：本科(在读)</p>-->
    <!--        <p class="main-2-text">-->
    <!--            <i class="bi bi-app" style="color: #dd2c00;"></i>-->
    <!--            毕业学校：南阳师范学院</p>-->

    <!--        <p class="main-2-text">-->
    <!--            <i class="bi bi-envelope"></i>-->
    <!--            Email：<a href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=2625727808@qq.com" target="_blank">2625727808@qq.com</a>-->
    <!--        </p>-->
    <!--    </div>-->
    <!--    <div id="main-3">-->
    <!--        &lt;!&ndash; <p class="title">[ 个人博客 ]</p> &ndash;&gt;-->
    <!--        &lt;!&ndash; 如果你要更换卡片背景图的话-->
    <!--                背景图大小为：180×70 （高斯模糊效果需要自己添加，最好在背景图周围添加一点淡淡的白色，这样效果更加~）&ndash;&gt;-->
    <!--        &lt;!&ndash; <p class="kapian" style="background: url(img/boke.jpg) center;">-->
    <!--            <a href="https://blog.csdn.net/weixin_44678052?spm=1000.2115.3001.5343" target="_blank" style="color: #000;">-->
    <!--                <span class="kapian-title"><i class="bi bi-journal-richtext"></i> 恢鹏uCSND</span>-->
    <!--            </a>-->
    <!--        </p>-->
    <!--        <p class="kapian" style="background: url(img/i.jpg) center;">-->
    <!--            <a href="https://mp.weixin.qq.com/s?__biz=MzUxNDAyNTMzOA==&amp;mid=2247484869&amp;idx=1&amp;sn=0d58b5713d39d9f8f5fca4a72ea99fa7&amp;chksm=f94d77d0ce3afec663a507d571de81b54e7cb8e64ca04ab2fffd7f015073c8e99e82c86dbe2f&token=363111286&lang=zh_CN#rd" target="_blank" style="color: #000;">-->
    <!--                <span class="kapian-title"><i class="bi bi-heart"></i> 恢鹏u微信公众号</span>-->
    <!--            </a>-->
    <!--        </p>-->
    <!--        <p class="kapian" style="background: url(img/i.jpg) center;">-->
    <!--            <a href="https://space.bilibili.com/389128868?spm_id_from=333.1007.0.0" target="_blank" style="color: #000;">-->
    <!--                <span class="kapian-title"><i class="bi bi-heart"></i> 恢鹏ubilibili</span>-->
    <!--            </a>-->
    <!--        </p> &ndash;&gt;-->
    <!--    </div>-->

    <!--    <div id="footer">-->
    <!--        &copy;2023 <a href="https://zxz.ee" style="color: #000;">云谷雪</a>-->
    <!--    </div>-->
</div>
<script>
    let token = sessionStorage.getItem("token");
    let friendID = null;
    window.onload = function () {
        $.ajax({
            url: "/mate/search",
            method: "get",
            headers: {"Authorization": token},
            success: function (res) {
                console.log(res.data);
                friendID = res.data.id;
                let data = res.data;
                let html = "                <div id=\"head\">\n" +
                    "                    <img id=\"touxiang\" src=" + data.avatar + ">\n" +
                    "                        <p id=\"nick\">" + data.nickName + "</p>\n" +
                    "                        <p id=\"info\"><span id=\"hitokoto_text\">ヾ(•ω•`)o加载中……</span></p>\n" +
                    "                </div>\n" +
                    "                <div id=\"main-1\">\n" +
                    "                \n" +
                    "                </div>\n" +
                    "                <div id=\"main-2\">\n" +
                    "                    <p class=\"main-2-text\">\n" +
                    "                        <i class=\"bi bi-gender-male\" style=\"color: blue;\"></i>\n" +
                    "                        性别：" + getSex(data.sex) + "</p>\n" +
                    "                    <p class=\"main-2-text\">\n" +
                    "                        <i class=\"bi bi-activity\" style=\"color: #ff3d00;\"></i>\n" +
                    "                        年龄：23</p>\n" +
                    "                    <p class=\"main-2-text\">\n" +
                    "                        <i class=\"bi bi-geo-alt-fill\" style=\"color: #304ffe;\"></i>\n" +
                    "                        出生于：河南</p>\n" +
                    "                    <p class=\"main-2-text\">\n" +
                    "                        <i class=\"bi bi-app-indicator\" style=\"color: #dd2c00;\"></i>\n" +
                    "                        状态：本科(在读)</p>\n" +
                    "                    <p class=\"main-2-text\">\n" +
                    "                        <i class=\"bi bi-app\" style=\"color: #dd2c00;\"></i>\n" +
                    "                        毕业学校：南阳师范学院</p>\n" +
                    "\n" +
                    "                    <p class=\"main-2-text\">\n" +
                    "                        <i class=\"bi bi-envelope\"></i>\n" +
                    "                        Email：<a href=\"https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=2625727808@qq.com\"\n" +
                    "                                 target=\"_blank\">" + data.email + "</a>\n" +
                    "                    </p>\n" +
                    "<button type='button' id='addF' onclick='addFriend()'>添加好友</button>" +
                    "<button type='button' id='beginChat' onclick='beginChat()'>开始聊天</button>" +
                    "                </div>\n" +
                    "                <div id=\"main-3\">\n" +
                    "\n" +
                    "                </div>\n" +
                    "\n" +
                    "                <div id=\"footer\">\n" +
                    "                    &copy;2023 <a href=\"#\" style=\"color: #000;\">" + data.nickName + "</a>\n" +
                    "                </div>";
                $("#main-box").html(html);
            }
        });

    }


    function getSex(str) {
        if (str == "0") {
            return "男";
        } else if (str == "1") {
            return "女";
        }
    }

    /**
     * 添加好友
     */
    function addFriend() {
        $.ajax({
            url: "/mate/addFriend",
            method: "get",
            data: {"id": friendID},
            headers: {"Authorization": token},
            success: function (res) {
                console.log(res.data);
                if (res.data == true) {
                    $("#addF").attr("disabled", true);
                } else {
                    alert("添加好友失败！")
                }
            }
        });
    }

    function beginChat() {
        let add = $("#addF").prop("disabled");
        console.log(add)
        if (add == true) {
            window.open("/main.html", "_self");
        } else {
            alert("添加好友后才可以聊天哦");
        }

    }
</script>
<!-- 一言API -->
<!-- 如果不启用API请将整段 script 注释掉 -->
<script>
    // 接口介绍：
    // 	k 文案相关：来源网络
    // 	f 文案相关：哲学
    // 	e 文案相关：原创
    // 	i 文案相关：诗词
    // 	a 文案相关：动画
    // 	g 文案相关：其他
    // 	h 文案相关：影视
    // 如果要更改请修改 "/?j=" 后半部分的
    // 例如：https://v1.hitokoto.cn/?j=k
    // 代表引用来自网络相关的文案
    fetch('https://v1.hitokoto.cn/?j=k')
        .then(response => response.json())
        .then(data => {
            const hitokoto = document.getElementById('hitokoto_text')
            hitokoto.innerText = data.hitokoto
        })

    document.onclick = function () {
        fetch('https://v1.hitokoto.cn/?j=k')
            .then(response => response.json())
            .then(data => {
                const hitokoto = document.getElementById('hitokoto_text')
                hitokoto.innerText = data.hitokoto
            })
    }


</script>
</body>
</html>
